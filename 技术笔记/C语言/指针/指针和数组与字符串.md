# 1、指针和数组
---
## 1.1指针和数组的关系
---
### 1>通过指针的形式访问数组
---
```C
#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>

int main()
{
	int arr[] = { 1,2,3,4,5 };
	int* p = &arr;

	int i = 0;
	for (i = 0; i < 5; i++)
	{
		printf("%d ", *(p + i));
	}
	return 0;
}
```
- a[i] == * (a+i)
### 2>通过数组的方式访问指针
---
```C
#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include<string.h>

int main()
{
	char *str = "hallo world";
	size_t len = strlen(str);

	for (int i = 0; i < len; i++)
	{
		printf("%c", str[i]);
	}
	return 0;
}
```
## 1.2指针和数组的区别
---
### 1>数组与常量指针
---
![](图片/QQ20251014-125536.png)

```C
#include<stdio.h>

int main()
{
	char str[32] = "halloworld"
	char *p = "halloworld"
	
	//str++;   //数组名是常指针（地址常量）不能修改
	p++;       //指向下一个元素
	
	//以下是错误写法：const修饰的q，不能被修改指向
	//char *const q = "halloworld"'
	//q++;
	
	str[0] = 'x';
	//p[0] = 'x';  //字符串常量，不能被修改
}
```
- 数组是常量指针，不能修改指向的地址。
- 数组可改内容不可改地址，指针可改指向不可改内容

### 2>数组与指针长度
---
#### 情况1
---
```C
#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include<string.h>

int main()
{
	char str[] = "hallo world";
	char* p = "hallo world";

	printf("%zd\n", sizeof(str));  //数组长度 12
	printf("%zd\n", sizeof(p));    //指针长度 8(64位操作系统下)

	return 0;
}
```
#### 情况2
---
```C
#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include<string.h>

void f(int* a)
{
	//数组名作为参数传过来后，变成了指针
	printf("%zd\n", sizeof(a) / sizeof(a[0]));//长度为2
}

int main()
{
	int a[10] = { 0 };

	printf("%zd\n", sizeof(a) / sizeof(a[0]));//长度为10

	f(a);
	return 0;
}
```
# 2、笔试训练
---
```C
//十六进制
int a[5] = {1, 2, 3, 4,5};
//题目：int *p1 = (int*)(&a + 1);
//&a：整个数组的地址
//&a+1：跳过一个数组的地址
```
![](图片/QQ20251014-132023.png)

```C
int a[5] = {1, 2, 3, 4, 5};
//题目：int *p2 = (int*)((int)a + 1);
//(int)a:将a地址强转成整形
//(int)a+1:整形+1
//(int*):强转为地址
```

```C
int a[5] = {1, 2, 3, 4, 5};
//题目：int *p3 = (int*)(a + 1);
//a+1：首元素地址+1，第二个元素的地址
```
![](图片/QQ20251014-132948.png)
# 3、指针和字符串
---
## 3.1指针数组
---
```C
#include<stdio.h>

int main()
{
	char *string[] = {"I love China","I am"};
	printf("%s\n",string[0]);
	return 0;
}
```
![](图片/QQ20251014-190145.png)
- []的优先级比* 高，所以是个数组
- int * 是个int类型的指针，结合起来是个指针数组(数组里存放指针)
## 3.2笔试训练
---
编写一个C函数，将“I am from shanghai”倒置为“shanghai from am I”，即将句子中的单词位置倒置，而不改变单词内部结构。
### 方法1
---
![](图片/QQ20251014-194410.png)
```C
#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include<string.h>
#include<stdlib.h>
#define SIZE 5

int main()
{
	char* str[SIZE] = { 0 };
	int i;
	for (i = 0; i < SIZE; i++)
	{
		//申请内存空间
		str[i] = (char*)malloc(sizeof(char) * 128);
		//输入字符串
		scanf("%s", str[i]);
	}

	char* t;
	for (i = 0; i < SIZE / 2; i++)
	{
		//首尾交换
		t = str[i];
		str[i] = str[SIZE - 1 - i];
		str[SIZE - 1 - i] = t;
	}

	for (i = 0; i < SIZE; i++)
	{
		//输出全部字符串
		printf("%s ", str[i]);
		//释放内存
		free(str[i]);
	}

	printf("\n");
	return 0;
}
```

### 方法2
---
```C
#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include<string.h>
#include<stdlib.h>

void reverse(char* begin, char* end)
{
	//防止地址变了，长度也跟着改变
	int i, len = end - begin + 1;
	char ch;
	for (i = 0; i < len / 2; i++)
	{
		//拆成一份一份，交换前后每个字节
		ch = *begin;
		*begin++ = *end;
		*end-- = ch;
	}
}

int main()
{
	//手动提供内存
	char* str = (char*)calloc(128,sizeof(char));
	int i = 0;
	char ch;

	//输入：hallo world I am from shanghai
	while ((ch = getchar()) != '\n')
	{
		str[i++] = ch;
	}
	//反转成：iahgnahs morf ma I dlrow ollah
	reverse(str, str + i - 1);

	char* begin = str, * end = str;
	while (*end != '\0')
	{
		if (*end == ' ')
		{
			//输出：shanghai from am I world ollah
			reverse(begin, end - 1);
			begin = end + 1;
		}
		end++;
	}

	//输出：shanghai from am I world hallo
	printf("%s\n", str);
	//释放内存
	free(str);
	return 0;
}
```
